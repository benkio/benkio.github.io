<!doctype html>
<html lang="en">
<head>
<title>Blog</title>
<!-- 2020-06-21 Sun 18:31 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style>body { margin-bottom: 0px; }</style><script>
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script><link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
<link rel="icon" href="images/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/blog.css">
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-12"><h1 class="title">Blog</h1>

<div id="outline-container-navbar" class="outline-2 text-center navbar navbar-inverse navbar-fixed-top">
<h2 id="navbar"><a id="sec-" name="sec-"></a>Blog</h2>
<div class="outline-text-2" id="text-navbar">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#collapsableNavbar">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<h1 id="navbarTitle" class="navbar-text">Blog</h1>
<div class="collapse navbar-collapse" id="collapsableNavbar">
<ul class="nav navbar-nav">
<li><a title="Home" href="./index.html"><i class="fas fa-home fa-3x" aria-hidden="true"></i></a></li>
<li><a title="Article List" href="./articleList.html" class="navbar-text h3">Article List</a></li>
<li><a title="Book List" href="./bookList.html" class="navbar-text h3">Book List</a></li>
</ul>
</div>
</div>
</div>


<div id="outline-container-Articles" class="outline-2">
<h2 id="Articles"><a id="sec-" name="sec-"></a>Articles</h2>
<div class="outline-text-2" id="text-Articles">
<div id='wrap1' data-include="article1"></div>
<div id='wrap2' data-include="article2"></div>
<div id='wrap3' data-include="article3"></div>
<div id='wrap4' data-include="article4"></div>
<div id='wrap5' data-include="article5"></div>

<ul id="pagination" class="pagination pagination-lg"></ul>

<script type="text/javascript">
var htmlArticles = ["<div id=\"outline-container-Article\" class=\"outline-2\"><h2 id=\"Article\"><a id=\"sec-\" name=\"sec-\"><\/a>Static Personal Website with Org Mode<\/h2><div class=\"outline-text-2\" id=\"text-Article\"><p><b>Created: <span class=\"timestamp-wrapper\"><span class=\"timestamp\">&lt;2020-06-11 Thu&gt;<\/span><\/span><\/b><\/p><\/div><div id=\"outline-container-ArticleAbstract\" class=\"outline-3\"><h3 id=\"ArticleAbstract\"><a id=\"sec-\" name=\"sec-\"><\/a>Abstract<\/h3><div class=\"outline-text-3\" id=\"text-ArticleAbstract\"><p>In this article I will show you how I built this site using:<\/p><ul class=\"org-ul\"><li>Org-mode<\/li><li>Bootstrap (<a href=\"https:\/\/github.com\/marsmining\/ox-twbs\">ox-twbs<\/a>)<\/li><li>HTML(autogenerated) + CSS(minimal) + Javascript (<a href=\"https:\/\/learn.jquery.com\/\">JQuery<\/a>)<\/li><\/ul><p>You can find the source code of this madness in <a href=\"https:\/\/github.com\/benkio\/benkio.github.io\">here<\/a>.<\/p><p>As you can see it is hosted into Github pages, therefore it\'s astatic webpage. However, we can get some backendfeatures using Org and Elisp. Of course, it\'s anything like aproject who has a real backend available, and some times we wouldneed to do some proper hacks.<\/p><p>Keep reading to discover the pitfalls and advantages of this approach.<\/p><\/div><\/div><div id=\"outline-container-ArticleContent\" class=\"outline-3\"><h3 id=\"ArticleContent\"><a id=\"sec-\" name=\"sec-\"><\/a>Content<\/h3><div class=\"outline-text-3\" id=\"text-ArticleContent\"><p>In this section, I will run you through the main features of the site, insertinglinks to the code where necessary.<\/p><\/div><div id=\"outline-container-sec-\" class=\"outline-4\"><h4 id=\"sec-\">Features<\/h4><div class=\"outline-text-4\" id=\"text-\"><\/div><div id=\"outline-container-sec-\" class=\"outline-5\"><h5 id=\"sec-\">Autogenerated HTML and Org-mode typing comfort<\/h5><div class=\"outline-text-5\" id=\"text-\"><p>One of the biggest advantages of choosing org-mode as atechnology is that you will get access to the comfort of writinga blog using a markdown language. Then, it looks clean and comeswith a lot of features (integrated into Emacs):<\/p><ul class=\"org-ul\"><li>It\'s easy to manipulate: tables, dates, links<\/li><li>Organize your text in sections<\/li><li>Create lists like this one and so on<\/li><\/ul><p>Basically you can do what you could do in a <code>.md<\/code> file andmore.<\/p><p>That\'s great!!! But what do you want at the end of the day is thewell-known trinity: HTML, CSS, JS. So, we need a way to generateat least HTML from that. Luckily, org-mode comes with a nativeexport system to HTML, with its own CSS too! However, the outcomeis far from being <i>modern<\/i>.<\/p><p>How to make things better? For sure I don\'t want to mess up withthe CSS: I\'m not a frontend dev, plus I learned a long time ago thepain of web designing. The only other option is to <b>steal it<\/b>!Fortunately, I have a go-to option: <span class=\"underline\">Bootstrap<\/span>.<\/p><p>Anyway, Bootstrap comes with its own set of rules and structure.Aligning the native autogenerated HTML code to that is stillvery hard, but apparently someone else had my same idea and hecreated an org extension that generates a Bootstrap-friendly HTMLoutput. This extension is called <a href=\"https:\/\/github.com\/marsmining\/ox-twbs\">ox-twbs<\/a> and it provides acommand (<code>org-twbs-export-to-html<\/code>) to compile the org to HTML.<\/p><p>In this way I\'m writing Org text right now and what you see it\'sthe final result. I got the responsiveness and all the styling(almost) for free, icons included (+ <a href=\"https:\/\/fontawesome.com\/\">fontawesome<\/a> for the homepage).<\/p><\/div><\/div><div id=\"outline-container-sec-\" class=\"outline-5\"><h5 id=\"sec-\">Article List and Blog Dynamic Content<\/h5><div class=\"outline-text-5\" id=\"text-\"><p>I already told you that this site is static, then how can weachieve some dynamic behavior?<\/p><p>The idea here is to take advantage of the org compilation toexecute some Elisp code (call it server-side if you wish). Thiscode will create some Js to be embedded into the page itself toserve as data. Later, on the javascript client-side, we will usethose variables to render the data into the page.<\/p><p>Using this method we can access other HTML files, such as thisarticle page, manipulate their content, and generate our data forthe targeted page. Two examples are The <a href=\"https:\/\/benkio.github.io\/blog.html\">Blog<\/a> page and the <a href=\"https:\/\/benkio.github.io\/articleList.html\">ArticleList<\/a> page.<\/p><p>On Both occasions there are two Js arrays, called<code>htmlArticles<\/code> and <code>htmlArticlesPaths<\/code>. The former contains asubset of the HTML structure (Title and Abstract) of theArticles, and the latter contains the relative path of them.Starting from those arrays we can zip it and create the list ofarticles: minimal in the case of the <a href=\"https:\/\/benkio.github.io\/articleList.html\">Article List<\/a> page and withsome preview in the case of the <a href=\"https:\/\/benkio.github.io\/blog.html\">Blog<\/a> page.<\/p><p>In addition, in order to achieve some simple sorting, we justneed to store the date into the articles filenames, as you cansee directly from the URL of this page.<\/p><p>What described before is achieved by the Elisp code into the file<a href=\"https:\/\/github.com\/benkio\/benkio.github.io\/blob\/master\/templates.org\">templates.org<\/a>(omitted for brevity) and then integrated into thepage in this way:<\/p><div class=\"org-src-container\"><pre class=\"src src-org\"><span style=\"color: #73d216;\">#+CALL: templates.org:compileOrgArticles()<\/span><span style=\"color: #73d216;\">#+CALL: templates.org:articlesRelativePaths()<\/span><\/pre><\/div><p>After that, we need to add some custom js to treat those variables andpopulate the empty article tags:<\/p><p><a id=\"populateArticlesSnippet\" name=\"populateArticlesSnippet\"><\/a><\/p><div class=\"org-src-container\"><pre class=\"src src-javascript\">#+name: populateArticles#+begin_src javascript :exports none<span style=\"color: #73d216;\">\/\/ <\/span><span style=\"color: #73d216;\">Pagination 0 based<\/span><span style=\"color: #b4fa70;\">const<\/span> <span style=\"color: #fcaf3e;\">htmlArticlesPaginated<\/span> = htmlArticles.slice(page, page + perPage);<span style=\"color: #b4fa70;\">const<\/span> <span style=\"color: #fcaf3e;\">htmlArticlesPathsPaginated<\/span> = htmlArticlesPaths.slice(page, page + perPage);<span style=\"color: #b4fa70;\">var<\/span> <span style=\"color: #fcaf3e;\">articleDivs<\/span> = $(<span style=\"color: #e9b96e;\">\"[data-include]\"<\/span>).map(<span style=\"color: #b4fa70;\">function<\/span>() { <span style=\"color: #b4fa70;\">return<\/span> <span style=\"color: #e9b2e3;\">this<\/span>.id; });<span style=\"color: #b4fa70;\">var<\/span> <span style=\"color: #fcaf3e;\">articlesZip<\/span> = [];<span style=\"color: #b4fa70;\">var<\/span> <span style=\"color: #fcaf3e;\">articlesElementsZip<\/span> = [];<span style=\"color: #b4fa70;\">for<\/span> (<span style=\"color: #b4fa70;\">var<\/span> <span style=\"color: #fcaf3e;\">i<\/span> = 0; i &lt; htmlArticlesPaginated.length; i++) {    articlesZip.push([htmlArticlesPaginated[i], htmlArticlesPathsPaginated[i]]);}<span style=\"color: #b4fa70;\">var<\/span> <span style=\"color: #fcaf3e;\">htmlArticlesTitle<\/span> = articlesZip.map(<span style=\"color: #b4fa70;\">function<\/span>(<span style=\"color: #fcaf3e;\">tuple<\/span>) {  <span style=\"color: #b4fa70;\">const<\/span> [<span style=\"color: #fcaf3e;\">articleContent<\/span>, <span style=\"color: #fcaf3e;\">articlePath<\/span>] = tuple;  <span style=\"color: #b4fa70;\">return<\/span> $($.parseHTML(articleContent)).find(<span style=\"color: #e9b96e;\">\"#Article\"<\/span>).wrap(<span style=\"color: #b4fa70;\">function<\/span> (){    <span style=\"color: #b4fa70;\">return<\/span> <span style=\"color: #e9b96e;\">\"&lt;a href=\'\"<\/span> + articlePath + <span style=\"color: #e9b96e;\">\"\'&gt;&lt;\/a&gt;\"<\/span>  }).parent();});<span style=\"color: #b4fa70;\">var<\/span> <span style=\"color: #fcaf3e;\">htmlArticlesAbstract<\/span> = htmlArticlesPaginated.map(<span style=\"color: #b4fa70;\">function<\/span>(<span style=\"color: #fcaf3e;\">articleContent<\/span>) {  <span style=\"color: #b4fa70;\">return<\/span> $($.parseHTML(articleContent)).find(<span style=\"color: #e9b96e;\">\"#outline-container-ArticleAbstract\"<\/span>);});<span style=\"color: #b4fa70;\">for<\/span> (<span style=\"color: #b4fa70;\">var<\/span> <span style=\"color: #fcaf3e;\">i<\/span> = 0; i &lt; htmlArticlesPaginated.length; i++) {    articlesElementsZip.push([articleDivs[i], htmlArticlesTitle[i], htmlArticlesAbstract[i]]);}articlesElementsZip.forEach(<span style=\"color: #b4fa70;\">function<\/span>(<span style=\"color: #fcaf3e;\">tuple<\/span>) {    <span style=\"color: #b4fa70;\">const<\/span> [<span style=\"color: #fcaf3e;\">element<\/span>, <span style=\"color: #fcaf3e;\">title<\/span>, <span style=\"color: #b4fa70;\">abstract<\/span>] = tuple;    $(<span style=\"color: #e9b96e;\">\"#\"<\/span> + element).html($(<span style=\"color: #e9b96e;\">\'&lt;div&gt;\'<\/span>).append(title).append(<span style=\"color: #b4fa70;\">abstract<\/span>));});#+end_src<\/pre><\/div><p>Obviously, all of this came at a cost, in particular:<\/p><ul class=\"org-ul\"><li>In case of an article addition\/deletion\/renaming we need torecompile both pages. This could be a nasty problem if we wouldneed to add multiple dynamic behaviors to several pages. A possibleworkaround could be to trigger the whole site compilation from asingle page, like the root page of the site. It might still takequite some time and this leads to the next point.<\/li><li>Not scalable compilation time: if we are going to have hundreds ofarticles it might take a long time and space (size of jsvariables). A workaround could be to split the articles intomultiple folders, by year or with an archive folder, then keep thedynamic nature only to a subset of the articles.<\/li><\/ul><\/div><\/div><div id=\"outline-container-sec-\" class=\"outline-5\"><h5 id=\"sec-\">Pagination<\/h5><div class=\"outline-text-5\" id=\"text-\"><p>Pagination is no different from the previous section, in fact, Ittakes advantage of the same data. <\/p><p>If you take a look closely to the previous <a href=\"#populateArticlesSnippet\">snippet<\/a> you will seetwo additional variables, called <code>page<\/code> and <code>perPage<\/code>, used toslice the starting data arrays to the specific selectedpage. Both of those variables are defined in another snippet, inparticular, the <code>page<\/code> is selected from the URL query string,meanwhile the <code>perPage<\/code> is fixed to 5.<\/p><p>Here you can see the complete js code snippet for the pagination:<\/p><script src=\"http:\/\/gist-it.appspot.com\/github\/benkio\/benkio.github.io\/blob\/master\/blog.org?slice=52:67\"><\/script><\/div><\/div><\/div><\/div><div id=\"outline-container-ArticleConclusions\" class=\"outline-3\"><h3 id=\"ArticleConclusions\"><a id=\"sec-\" name=\"sec-\"><\/a>Conclusions<\/h3><div class=\"outline-text-3\" id=\"text-ArticleConclusions\"><p>In conclusion, <b><b>DON\'T DO WHAT I HAVE DONE<\/b><\/b>. I\'m sure there areseveral solutions that are more convenient then the one I implementedin here, like Wordpress, Blogspot, Blogger&#x2026;<\/p><p>Anyway, even if I have to re-implement several well known framework, Ialso gain these benefits:<\/p><ul class=\"org-ul\"><li>I have the chance to learn org better<\/li><li>I am free from a specific framework<\/li><li>It\'s fun (for me)<\/li><\/ul><\/div><\/div><\/div>"];
var htmlArticlesPaths = ["./articles/2020-06-11-OrgBlog.html"];
</script>

<script type="text/javascript">
const page = ((new URLSearchParams(window.location.search).get('page') || 1) - 1) * 5;
const perPage = 5;
for (var i = 0; i < (htmlArticles.length/perPage); i++) {
    var active = "";
    if ((page/perPage) == i) {
        active = "class='active'";
    }
    $("#pagination").append(
        '<li ' + active + '><a href="' + window.location.href.split('?')[0] + '?page=' + (i+1) + '">' + (i+1) + '</a></li>'
    );
}
</script>

<script type="text/javascript">
// Pagination 0 based
const htmlArticlesPaginated = htmlArticles.slice(page, page + perPage);
const htmlArticlesPathsPaginated = htmlArticlesPaths.slice(page, page + perPage);

var articleDivs = $("[data-include]").map(function() { return this.id; });

var articlesZip = [];
var articlesElementsZip = [];

for (var i = 0; i < htmlArticlesPaginated.length; i++) {
    articlesZip.push([htmlArticlesPaginated[i], htmlArticlesPathsPaginated[i]]);
}

var htmlArticlesTitle = articlesZip.map(function(tuple) {
  const [articleContent, articlePath] = tuple;
  return $($.parseHTML(articleContent)).find("#Article").wrap(function (){
    return "<a href='" + articlePath + "'></a>"
  }).parent();
});

var htmlArticlesAbstract = htmlArticlesPaginated.map(function(articleContent) {
  return $($.parseHTML(articleContent)).find("#outline-container-ArticleAbstract");
});

for (var i = 0; i < htmlArticlesPaginated.length; i++) {
    articlesElementsZip.push([articleDivs[i], htmlArticlesTitle[i], htmlArticlesAbstract[i]]);
}

articlesElementsZip.forEach(function(tuple) {
    const [element, title, abstract] = tuple;
    $("#" + element).html($('<div>').append(title).append(abstract));
});

</script>
</div>
</div>
</div></div></div>
</body>
</html>
